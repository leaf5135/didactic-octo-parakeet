<div class="min-h-screen bg-background">
  <%= render 'shared/navigation' %>

  <!-- Main Content -->
  <main class="container mx-auto py-6 px-4 sm:px-6 lg:px-8">
    <!-- Page header -->
    <div class="px-4 py-6 sm:px-0">
      <div class="border-b border-border pb-5">
        <h3 class="text-2xl font-bold tracking-tight">
          Real-time Chat
        </h3>
      </div>
    </div>

    <!-- Chat Messages -->
    <div class="px-4 py-6 sm:px-0">
      <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
        <div class="px-4 py-5 sm:p-6">
          <div class="space-y-4" id="messages" data-cable-channel="ChatChannel">
            <template data-cable-template="chat_channel">
              <%= render partial: "message", locals: { message: Message.new(user: current_user) } %>
            </template>
            <% if @messages.any? %>
              <%= render @messages %>
            <% else %>
              <div class="text-sm text-muted-foreground">
                <p>No messages yet.</p>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <!-- Chat Form -->
    <div class="px-4 py-6 sm:px-0">
      <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
        <div class="px-4 py-5 sm:p-6">
          <%= form_with(url: chat_index_path,
              html: {
                "tool-name" => "send-chat-message",
                "tool-description" => "Send a message in the real-time chat."
              }) do |form| %>
            <div class="flex items-center">
              <%= form.text_field :content,
                  required: true,
                  class: "w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",
                  placeholder: "Type your message...",
                  "tool-param-description" => "The content of the chat message.",
                  "tool-param-type" => "string" %>
              <%= form.submit "Send", class: "ml-4 px-4 py-2 rounded-md bg-primary text-primary-foreground shadow-sm hover:bg-primary/90" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </main>
</div>
